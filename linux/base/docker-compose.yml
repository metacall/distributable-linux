#
#	MetaCall Distributable by Parra Studios
#	Distributable infrastructure for MetaCall.
#
#	Copyright (C) 2016 - 2019 Vicente Eduardo Ferrer Garcia <vic798@gmail.com>
#
#	Licensed under the Apache License, Version 2.0 (the "License");
#	you may not use this file except in compliance with the License.
#	You may obtain a copy of the License at
#
#		http://www.apache.org/licenses/LICENSE-2.0
#
#	Unless required by applicable law or agreed to in writing, software
#	distributed under the License is distributed on an "AS IS" BASIS,
#	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#	See the License for the specific language governing permissions and
#	limitations under the License.
#

# TODO (qemu?):
#   mips: mips-linux-gnu
#   mips64el: mips64el-linux-gnuabi64
#   mipsel: mipsel-linux-gnu

version: "3.7"

services:
  amd64:
    image: metacall/distributable:linux-base-amd64
    container_name: metacall_distributable_linux_base_amd64
    build:
      context: .
      dockerfile: Dockerfile
      args:
        METACALL_ARCH: amd64
        METACALL_ARCH_PATH: x86_64-linux-gnu
        METACALL_PATH: $METACALL_PATH

  arm32v5:
    image: metacall/distributable:linux-base-arm32v5
    container_name: metacall_distributable_linux_base_arm32v5
    build:
      context: .
      dockerfile: Dockerfile
      args:
        METACALL_ARCH: arm32v5
        METACALL_ARCH_PATH: arm-linux-gnueabi
        METACALL_PATH: $METACALL_PATH

  arm32v7:
    image: metacall/distributable:linux-base-arm32v7
    container_name: metacall_distributable_linux_base_arm32v7
    build:
      context: .
      dockerfile: Dockerfile
      args:
        METACALL_ARCH: arm32v7
        METACALL_ARCH_PATH: arm-linux-gnueabihf
        METACALL_PATH: $METACALL_PATH

  arm64v8:
    image: metacall/distributable:linux-base-arm64v8
    container_name: metacall_distributable_linux_base_arm64v8
    build:
      context: .
      dockerfile: Dockerfile
      args:
        METACALL_ARCH: arm64v8
        METACALL_ARCH_PATH: aarch64-linux-gnu
        METACALL_PATH: $METACALL_PATH

  i386:
    image: metacall/distributable:linux-base-i386
    container_name: metacall_distributable_linux_base_i386
    build:
      context: .
      dockerfile: Dockerfile
      args:
        METACALL_ARCH: i386
        METACALL_ARCH_PATH: i386-linux-gnu
        METACALL_PATH: $METACALL_PATH

  ppc64le:
    image: metacall/distributable:linux-base-ppc64le
    container_name: metacall_distributable_linux_base_ppc64le
    build:
      context: .
      dockerfile: Dockerfile
      args:
        METACALL_ARCH: ppc64le
        METACALL_ARCH_PATH: powerpc64le-linux-gnu
        METACALL_PATH: $METACALL_PATH

  s390x:
    image: metacall/distributable:linux-base-s390x
    container_name: metacall_distributable_linux_base_s390x
    build:
      context: .
      dockerfile: Dockerfile
      args:
        METACALL_ARCH: s390x
        METACALL_ARCH_PATH: s390x-linux-gnu
        METACALL_PATH: $METACALL_PATH
